<ng-include src="'includes/headerCustomerArea.html'" onload="selectedView='USERDATA'"></ng-include>

<div class="container" ng-controller="CustomerUserDataController">
    <div class="page-header" style="margin-top: 0;">
        <h1>Benutzerdaten</h1>
    </div>

    <form name="userForm" class="form-horizontal" novalidate>
        <div class="alert alert-success" ng-show="updateUserSuccessMsg.length > 0">{{updateUserSuccessMsg}}</div>
        <div class="alert alert-danger" ng-show="updateUserErrorMsg.length > 0">{{updateUserErrorMsg}}</div>
        <fieldset>
            <legend>Account Daten</legend>
            <div class="form-group">
                <label class="col-xs-2 control-label">Vorname</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.firstName" name="firstName" class="form-control" required />
                </div>
                <span class="error" ng-show="userForm.firstName.$invalid && userForm.firstName.$dirty">Required!</span>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">Nachname</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.lastName" name="lastName" class="form-control" required />
                </div>
                <span class="error" ng-show="userForm.lastName.$invalid && userForm.lastName.$dirty">Required!</span>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">E-Mail</label>
                <div class="col-xs-3">
                    <input type="email" ng-model="formUser.email" name="email" class="form-control" required my-validate-unique-user-email/>
                </div>
                <span class="error" ng-show="userForm.email.$error.required && userForm.email.$dirty">Required!</span>
                <span class="error" ng-show="userForm.email.$error.email && userForm.email.$dirty">E-Mail Adresse ungütlig</span>
                <span class="error" ng-show="userForm.email.$error.unique && userForm.email.$dirty">E-Mail vergeben</span>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">Benutzername</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.userName" name="userName" class="form-control" required my-validate-unique-user-name/>
                </div>
                <span class="error" ng-show="userForm.userName.$error.required && userForm.userName.$dirty">Required!</span>
                <span class="error" ng-show="userForm.userName.$error.unique && userForm.userName.$dirty">Username vergeben</span>
            </div>
        </fieldset>
        <fieldset>
            <legend>Kontakt Daten</legend>
            <div class="form-group">
                <label class="col-xs-2 control-label">Telefon</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.phoneNumber" class="form-control" name="phoneNumber" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">Straße</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.street" name="street" class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">PLZ</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.zipCode" name="zipCode" class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">Stadt</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.city" name="city" class="form-control" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-xs-2 control-label">Land</label>
                <div class="col-xs-3">
                    <input type="text" ng-model="formUser.country" name="country" class="form-control" />
                </div>
            </div>
        </fieldset>
        <div class="spacer20"></div>
        <button type="button" class="btn btn-lg btn-primary" ng-disabled="userForm.$invalid" ng-click="updateUser()">Benutzerdaten ändern</button>
    </form>
</div>

<div style="display: none;">
    <div class="form-group">
        <label class="col-xs-2 control-label">Passwort</label>
        <div class="col-xs-3">
            <input type="password" ng-model="formUser.password" class="form-control" name="password" required />
        </div>
        <span class="error" ng-show="userForm.password.$invalid && userForm.password.$dirty">Required!</span>
    </div>
    <div class="form-group">
        <label class="col-xs-2 control-label">Passwort bestätigen</label>
        <div class="col-xs-3">
            <input type="password" ng-model="formUser.passwordConfirmation" class="form-control" name="passwordConfirmation" my-pw-match password-match="formUser.password" />
        </div>
        <span class="error" ng-show="userForm.passwordConfirmation.$invalid && userForm.passwordConfirmation.$dirty">Passwörter ungleich</span>
    </div>
</div>